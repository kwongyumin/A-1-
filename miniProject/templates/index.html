<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- 클라이언트 화면 비율에 맞춰 View 크기 조정 -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- 부트스트랩 템플릿 / jQuery -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <!-- Bulma CSS 링크 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- 폰트 -->
    <link href="https://fonts.googleapis.com/css2?family=Stylish&display=swap" rel="stylesheet">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <title>MiniProject-Main </title>

    <script>
        //쿼리스트링으로 num값을 넘김 / 추후 방법은 바꿀 것 , 우선 기능 점검
        function  go_view(num){
            let num_title = num
			//url += num
			window.location.href="/ObjectView/" + num_title
        }

        //로그인 성공 후 메인 화면 진입 시 게시판 출력
        $(document).ready(function (){
            listing();
        });

        function listing(){
             $.ajax({
                type: 'GET',
                url: '/boardList',
                data: {},
                success: function (response) {

                    let rows = response['boardlist']

                    for(let i = 0 ;i < rows.length; i++){
                        let num = rows[i]['num']
                        let nickname = rows[i]['nickname']
                        let title = rows[i]['title']
                        let file = rows[i]['file']
                        //부트스트랩에 CSS가 적용되지않아, 우선은 인라인 스타일로 해결했음.
                        let temp_html = `  <div class="col">
                                <div class="card h-100">
                                    <img src="/static/userimg/${file}"
                                         class="card-img-top"
                                        style="width: 300px;
                                       height: 150px;
                                       object-fit: cover;">
                                    <div class="card-body">
                                        <h5 class="card-title"
                                            style="font-size: 18px">${title}</h5>
                                        <h5 class="card-title"
                                            style="font-size: 18px">${nickname}</h5>
                                       <p class="mycomment"><button  onclick="go_view(${num})" type="button">자세히 보기</button></p>
                                    </div>
                                </div>
                            </div>`
                        //go_view 함수에 객체의 num값을 파라미터로 전달
                        $('#cards-box').append(temp_html)

                    }


                }
             })
        }
    </script>

</head>
<body>
{% include('head.html') %}

	<div class="section">
			<input type="radio" name="slide" id="slide01" checked>
			<input type="radio" name="slide" id="slide02">
			<input type="radio" name="slide" id="slide03">

			<div class="slidewrap">
				<ul class="slidelist slidebox">
					<li class="slidepics">
						<a>
							<label for="slide03" class="left"></label>
							<img src="../static/img/test1.jpg">
							<label for="slide02" class="right"></label>
						</a>
					</li>
					<li class="slidepics">
						<a>
							<label for="slide01" class="left"></label>
							<img src="../static/img/test2.jpg">
							<label for="slide03" class="right"></label>
						</a>
					</li>
					<li class="slidepics">
						<a>
							<label for="slide02" class="left"></label>
							<img src="../static/img/test1.jpg">
							<label for="slide01" class="right"></label>
						</a>
					</li>
				</ul>
			</div>
	</div>
	<div class="mycards">
		<div class="row row-cols-1 row-cols-md-4 g-4" id="cards-box">

		</div>
	</div>
	<footer class="nocontents">
	</footer>
</body>
</html>